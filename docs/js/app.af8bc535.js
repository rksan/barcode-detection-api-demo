(function(){"use strict";var e={8842:function(e,t,a){var o=a(9242),r=a(3396);function n(e,t,a,o,n,i){const s=(0,r.up)("PHome");return(0,r.wg)(),(0,r.j4)(s,{theme:"dark"})}var i=a(7139);const s={class:"wapper grid-container"},l={class:"header grid-item-head"},d=(0,r._)("p",null,"Start をクリック後、ブラウザにカメラの使用を許可してください。",-1),c=(0,r._)("i",{class:"bi bi-upc-scan"},null,-1),u=(0,r._)("i",{class:"bi bi-stop-circle-fill"},null,-1),h=(0,r._)("section",{class:"content grid-item-main camera-demo"},[(0,r._)("div",{id:"interactive",class:"viewport"})],-1),g={class:"footer w-100 position-absolute bottom-0 start-0"},m={class:"d-flex justify-content-end p-5"},p=(0,r._)("button",{type:"button",class:"preview-button btn btn-secondary","data-bs-toggle":"offcanvas","data-bs-target":"#previewList","aria-controls":"previewList"},[(0,r._)("i",{class:"bi bi-images"})],-1),b=(0,r._)("button",{type:"button",class:"btn dropdown-toggle dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,r._)("span",{class:"visually-hidden"},"Toggle Dropdown")],-1),v={class:"dropdown-menu dropdown-menu-dark"},f=(0,r._)("li",null,[(0,r._)("button",{class:"dropdown-item","data-bs-toggle":"offcanvas","data-bs-target":"#previewList","aria-controls":"previewList"}," Show Preview ")],-1),_=(0,r._)("div",{class:"offcanvas-header"},[(0,r._)("h5",{class:"offcanvas-title",id:"offcanvasExampleLabel"},"Previews"),(0,r._)("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),y={class:"offcanvas-body"},k={class:"preview-list list-group list-group-flush list-group-numbered",style:{"flex-direction":"column-reverse"}},w=["src"],C={class:"preview-list-text bg-light text-dark"},x={id:"dspResult",class:"modal","aria-hidden":"true"},R={class:"modal-dialog modal-dialog-scrollable"},S=(0,r._)("div",{class:"modal-header"},[(0,r._)("h5",{class:"modal-title"},"Result"),(0,r._)("button",{class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),j={class:"modal-body bg-dark"},O={class:"prettyprint linenums"};function P(e,t,a,n,P,L){const D=(0,r.up)("b-button");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",s,[(0,r._)("section",l,[d,(0,r._)("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=(...t)=>e.doStart&&e.doStart(...t))},[c,(0,r.Uk)(" Start ")]),(0,r._)("button",{class:"btn btn-danger",onClick:t[1]||(t[1]=(...t)=>e.doStop&&e.doStop(...t))},[u,(0,r.Uk)(" Stop ")])]),h]),(0,r._)("div",g,[(0,r._)("div",m,[(0,r._)("div",{class:(0,i.C_)(["btn-group bg-secondary dropup",e.compAnime]),onAnimationend:t[3]||(t[3]=(...t)=>e.doAnimationEnd&&e.doAnimationEnd(...t))},[p,b,(0,r._)("ul",v,[f,(0,r._)("li",null,[(0,r._)("button",{class:"dropdown-item",onClick:t[2]||(t[2]=(...t)=>e.resetGallary&&e.resetGallary(...t))},"Reset")])]),(0,r.wy)((0,r._)("span",{class:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"},(0,i.zw)(e.model.gallery.length),513),[[o.F8,0!==e.model.gallery.length]])],34)])]),(0,r._)("div",{class:(0,i.C_)(["offcanvas offcanvas-end",e.compTheme]),tabindex:"-1",id:"previewList"},[_,(0,r._)("div",y,[(0,r._)("div",k,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.model.gallery,((t,a)=>((0,r.wg)(),(0,r.j4)(D,{key:a,class:(0,i.C_)(["list-group-item list-group-item-action",e.compTheme]),"data-bs-toggle":"modal","data-bs-target":"#dspResult","data-result-index":a,onClick:e.doRsult},{default:(0,r.w5)((()=>[(0,r._)("img",{src:t.imageURL,class:"preview-list-img"},null,8,w),(0,r._)("h5",C," Code "+(0,i.zw)(a+1)+". : "+(0,i.zw)(t.code),1)])),_:2},1032,["class","data-result-index","onClick"])))),128))])])],2),(0,r._)("div",x,[(0,r._)("div",R,[(0,r._)("div",{class:(0,i.C_)(["modal-content",e.compTheme])},[S,(0,r._)("div",j,[(0,r._)("code",O,(0,i.zw)(e.model.dspResult),1)])],2)])])],64)}a(7658);var L={inputStream:{name:"Live",type:"LiveStream",target:"#interactive.viewport",constraints:{width:1280,height:720,facingMode:"environment"},singleChannel:!1},numOfWorkers:navigator.hardwareConcurrency||4,decoder:{readers:["ean_reader"]},locate:!0},D={name:"o-input-form",props:{theme:{type:String,default(){return"light"}}},computed:{compTheme(){return"light"===this.theme?["bg-light","text-dark"].join(" "):["bg-dark","text-light"].join(" ")},compAnime(){return this.anime?["anime"].join(" "):""}},data(){return{model:{imageURL:"",gallery:[{code:"",imageURL:"",result:null,checker:null}],dspResult:""},anime:!1}},setup(){const e={log:"#my-log",Quagga:null,codeChecker:{codes:[],count:0,error:0,errors:[]}};return{...e,console(e,t){if("string"===typeof this.log&&(this.log=document.querySelector(this.log)),"string"===typeof t){var a=document.createElement("p");a.textContent=t,this.log.appendChild(a)}},init(){this.codes=[],this.Quagga=a(928),this.Quagga.onProcessed(this.doProcessed),this.Quagga.onDetected(this.doDetected),this.Quagga.init(L,(e=>{e?this.console(e):(this.console("Initialization finished. Ready to start"),this.Quagga.start())}))},term(){this.Quagga.offProcessed(this.doProcessed),this.Quagga.offDetected(this.doDetected),this.Quagga.stop()},isSameCode(e){const t=this.codeCheckCode(e.codeResult.code);if(t.length<5)return!1;const a=t.every((e=>e===t[0]));return this.codeCheckCount(),a||this.codeCheckError(),a},getCodeChecker(){return Object.assign({},this.codeChecker)},codeCheckCode(e){return e&&this.codeChecker.codes.push(e),this.codeChecker.codes},codeCheckCount(){return++this.codeChecker.count},codeCheckError(){return this.codeChecker.errors.push(this.codeChecker.codes.shift()),++this.codeChecker.error},resetCodeChecker(){this.codeChecker.codes=[],this.codeChecker.count=0,this.codeChecker.error=0,this.codeChecker.errors=[]}}},created(){this.resetGallary()},methods:{resetGallary(){this.model.gallery=[]},addGallary({code:e,imageURL:t,result:a,checker:o}){this.model.gallery.push({code:e,imageURL:t,result:a,checker:o})},doAnimationEnd(){this.anime=!1},doRsult(e){let t=e.currentTarget;var a=t.dataset.resultIndex,o=this.model.gallery[a].result;this.model.dspResult=JSON.stringify(o)},doStop(){this.term()},doStart(){this.init()},doProcessed(e){if(e){this.console("[Processed]",e);const t=this.Quagga.canvas.ctx.overlay,a=this.Quagga.canvas.dom.overlay;e.boxes&&(t.clearRect(0,0,parseInt(a.getAttribute("width")),parseInt(a.getAttribute("height"))),e.boxes.filter((t=>t!==e.box)).forEach((e=>{this.Quagga.ImageDebug.drawPath(e,{x:0,y:1},t,{color:"green",lineWidth:2})}))),e.box&&this.Quagga.ImageDebug.drawPath(e.box,{x:0,y:1},t,{color:"#00F",lineWidth:2}),e.codeResult&&e.codeResult.code&&this.Quagga.ImageDebug.drawPath(e.line,{x:"x",y:"y"},t,{color:"red",lineWidth:3})}},doDetected(e){if(e&&e.codeResult&&(console.log("[Detected]",e),this.isSameCode(e))){const t=e.codeResult.code,a=this.Quagga.canvas.dom.image;this.model.imageURL=a.toDataURL(),this.addGallary({code:t,imageURL:this.model.imageURL,result:e,checker:this.getCodeChecker()}),this.doStop(),this.resetCodeChecker(),this.anime=!0}}}},Q=D,T=a(89);const U=(0,T.Z)(Q,[["render",P]]);var E=U;const A=(0,r.uE)('<div class="container-fluid"><a class="navbar-brand" href="#">Barcode Reader Demo</a><button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarHead" aria-controls="navbarHead" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarHead"><ul class="navbar-nav flex-row flex-wrap"><li class="nav-item"><a class="nav-link active" href="/">Home</a></li></ul><ul class="navbar-nav flex-row flex-wrap ms-md-auto"><li class="nav-item"><a class="nav-link active" href="https://github.com/rksan/barcode-detection-api-demo" target="_blank"><i class="bi bi-github"></i> github </a></li></ul></div></div>',1),I=[A];function H(e,t,a,o,n,s){return(0,r.wg)(),(0,r.iD)("nav",{class:(0,i.C_)(["navbar navbar-expand-lg",s.compTheme])},I,2)}var G={name:"o-navbar",props:{theme:{type:String,default(){return"light"}}},computed:{compTheme(){return"light"===this.theme?["navbar-light","bg-light","text-dark"].join(" "):["navbar-dark","bg-dark","text-light"].join(" ")}}};const W=(0,T.Z)(G,[["render",H]]);var z=W;const Z={class:"header grid-item-head"},F={class:"main grid-item-main"};function M(e,t,a,o,n,s){const l=z,d=E;return(0,r.wg)(),(0,r.iD)("div",{class:(0,i.C_)(["container-fluid grid-container",s.compTheme])},[(0,r._)("header",Z,[(0,r.Wm)(l,{theme:a.theme},null,8,["theme"])]),(0,r._)("main",F,[(0,r.Wm)(d,{theme:a.theme},null,8,["theme"])])],2)}var N={name:"p-home",components:{ONavbar:z,OInputForm:E},props:{theme:{type:String,default(){return"light"}}},computed:{compTheme(){return"light"===this.theme?["bg-light","text-dark"].join(" "):["bg-dark","text-light"].join(" ")}}};const Y=(0,T.Z)(N,[["render",M],["__scopeId","data-v-2b1e026e"]]);var q=Y,B={name:"App",components:{PHome:q}};const J=(0,T.Z)(B,[["render",n]]);var K=J,V=a(4193);(0,o.ri)(K).use(V.ZP).mount("#app")}},t={};function a(o){var r=t[o];if(void 0!==r)return r.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,o,r,n){if(!o){var i=1/0;for(c=0;c<e.length;c++){o=e[c][0],r=e[c][1],n=e[c][2];for(var s=!0,l=0;l<o.length;l++)(!1&n||i>=n)&&Object.keys(a.O).every((function(e){return a.O[e](o[l])}))?o.splice(l--,1):(s=!1,n<i&&(i=n));if(s){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[o,r,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,n,i=o[0],s=o[1],l=o[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(l)var c=l(a)}for(t&&t(o);d<i.length;d++)n=i[d],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(c)},o=self["webpackChunkbarcode_detection_api_demo"]=self["webpackChunkbarcode_detection_api_demo"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[998],(function(){return a(8842)}));o=a.O(o)})();
//# sourceMappingURL=app.af8bc535.js.map