(function(){"use strict";var e={2896:function(e,t,o){var a=o(9242),i=o(3396);function n(e,t,o,a,n,r){const s=(0,i.up)("PHome");return(0,i.wg)(),(0,i.j4)(s,{theme:"dark"})}var r=o(7139);const s={class:"wapper grid-container"},l={class:"header grid-item-head"},d=(0,i._)("p",null,"Start をクリック後、ブラウザにカメラの使用を許可してください。",-1),c=(0,i._)("i",{class:"bi bi-upc-scan"},null,-1),u=(0,i._)("i",{class:"bi bi-stop-circle-fill"},null,-1),h={id:"interactive",class:"viewport"},g={class:"footer w-100 position-absolute bottom-0 start-0"},m={class:"d-flex justify-content-end p-5"},p=(0,i._)("button",{type:"button",class:"preview-button btn btn-secondary","data-bs-toggle":"offcanvas","data-bs-target":"#previewList","aria-controls":"previewList"},[(0,i._)("i",{class:"bi bi-images"})],-1),b=(0,i._)("button",{type:"button",class:"btn dropdown-toggle dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,i._)("span",{class:"visually-hidden"},"Toggle Dropdown")],-1),v={class:"dropdown-menu dropdown-menu-dark"},f=(0,i._)("li",null,[(0,i._)("button",{class:"dropdown-item","data-bs-toggle":"offcanvas","data-bs-target":"#previewList","aria-controls":"previewList"}," Show Preview ")],-1),_=(0,i._)("div",{class:"offcanvas-header"},[(0,i._)("h5",{class:"offcanvas-title",id:"offcanvasExampleLabel"},"Previews"),(0,i._)("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),w={class:"offcanvas-body"},y={class:"preview-list list-group list-group-flush list-group-numbered",style:{"flex-direction":"column-reverse"}},C=["src"],k={class:"preview-list-text bg-light text-dark"},x={id:"dspResult",class:"modal","aria-hidden":"true"},S={class:"modal-dialog modal-dialog-scrollable"},D=(0,i._)("div",{class:"modal-header"},[(0,i._)("h5",{class:"modal-title"},"Result"),(0,i._)("button",{class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),R={class:"modal-body bg-dark"},O={class:"prettyprint linenums"};function j(e,t,o,n,j,T){const E=(0,i.up)("b-button");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",s,[(0,i._)("section",l,[d,(0,i._)("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=(...t)=>e.doStart&&e.doStart(...t))},[c,(0,i.Uk)(" Start ")]),(0,i._)("button",{class:"btn btn-danger",onClick:t[1]||(t[1]=(...t)=>e.doStop&&e.doStop(...t))},[u,(0,i.Uk)(" Stop ")])]),(0,i._)("section",{class:(0,r.C_)(["content grid-item-main",e.compCameraTheme])},[(0,i._)("div",h,[(0,i._)("span",null,(0,r.zw)(e.videoInfo),1)])],2)]),(0,i._)("div",g,[(0,i._)("div",m,[(0,i._)("div",{class:(0,r.C_)(["btn-group bg-secondary dropup",e.compAnime]),onAnimationend:t[3]||(t[3]=(...t)=>e.doAnimationEnd&&e.doAnimationEnd(...t))},[p,b,(0,i._)("ul",v,[f,(0,i._)("li",null,[(0,i._)("button",{class:"dropdown-item",onClick:t[2]||(t[2]=(...t)=>e.resetGallary&&e.resetGallary(...t))},"Reset")])]),(0,i.wy)((0,i._)("span",{class:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"},(0,r.zw)(e.model.gallery.length),513),[[a.F8,0!==e.model.gallery.length]])],34)])]),(0,i._)("div",{class:(0,r.C_)(["offcanvas offcanvas-end",e.compTheme]),tabindex:"-1",id:"previewList"},[_,(0,i._)("div",w,[(0,i._)("div",y,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.model.gallery,((t,o)=>((0,i.wg)(),(0,i.j4)(E,{key:o,class:(0,r.C_)(["list-group-item list-group-item-action",e.compTheme]),"data-bs-toggle":"modal","data-bs-target":"#dspResult","data-result-index":o,onClick:e.doRsult},{default:(0,i.w5)((()=>[(0,i._)("img",{src:t.imageURL,class:"preview-list-img"},null,8,C),(0,i._)("h5",k," Code "+(0,r.zw)(o+1)+". : "+(0,r.zw)(t.code),1)])),_:2},1032,["class","data-result-index","onClick"])))),128))])])],2),(0,i._)("div",x,[(0,i._)("div",S,[(0,i._)("div",{class:(0,r.C_)(["modal-content",e.compTheme])},[D,(0,i._)("div",R,[(0,i._)("code",O,(0,r.zw)(e.model.dspResult),1)])],2)])])],64)}o(7658);var T={inputStream:{name:"Live",type:"LiveStream",target:"#interactive.viewport",constraints:{width:{min:1280,ideal:1920,max:2560},height:{min:720,ideal:1080,max:1440},facingMode:"environment"},singleChannel:!1},numOfWorkers:navigator.hardwareConcurrency||4,decoder:{readers:["ean_reader"]},locate:!0},E={name:"o-input-form",props:{theme:{type:String,default(){return"light"}}},computed:{compTheme(){return"light"===this.theme?["bg-light","text-dark"].join(" "):["bg-dark","text-light"].join(" ")},compCameraTheme(){return"light"===this.theme?["camera-demo-light"].join(" "):["camera-demo-dark"].join(" ")},compAnime(){return this.anime?["anime"].join(" "):""}},data(){return{model:{imageURL:"",gallery:[{code:"",imageURL:"",result:null,checker:null}],dspResult:""},anime:!1,observer:null,videoInfo:""}},setup(){const e={log:"#my-log",Quagga:null,codeChecker:{codes:[],count:0,error:0,errors:[]}};return{...e,console(e,t){if("string"===typeof this.log&&(this.log=document.querySelector(this.log)),"string"===typeof t){var o=document.createElement("p");o.textContent=t,this.log.appendChild(o)}},init(){this.codes=[],this.Quagga=o(928),this.Quagga.onProcessed(this.doProcessed),this.Quagga.onDetected(this.doDetected),this.Quagga.init(T,(e=>{e?this.console(e):(this.console("Initialization finished. Ready to start"),this.Quagga.start())})),this.initOvserver()},term(){this.Quagga.offProcessed(this.doProcessed),this.Quagga.offDetected(this.doDetected),this.Quagga.stop(),this.termObserver()},isSameCode(e){const t=this.codeCheckCode(e.codeResult.code);if(t.length<5)return!1;const o=t.every((e=>e===t[0]));return this.codeCheckCount(),o||this.codeCheckError(),o},getCodeChecker(){return Object.assign({},this.codeChecker)},codeCheckCode(e){return e&&this.codeChecker.codes.push(e),this.codeChecker.codes},codeCheckCount(){return++this.codeChecker.count},codeCheckError(){return this.codeChecker.errors.push(this.codeChecker.codes.shift()),++this.codeChecker.error},resetCodeChecker(){this.codeChecker.codes=[],this.codeChecker.count=0,this.codeChecker.error=0,this.codeChecker.errors=[]}}},created(){this.resetGallary()},methods:{initOvserver(){const e=document.querySelector(".viewport"),t=new ResizeObserver(this.doOvserver);t.observe(e),this.observer=t},termObserver(){this.observer.disconnect()},doOvserver(e){e.forEach((e=>{const t=e.target,o=e.contentRect,a=t.getElementsByTagName("video")[0],i=a?a.getBoundingClientRect():{width:"",height:""},n=t.getElementsByTagName("canvas")[0],r=n?n.getBoundingClientRect():{width:"",height:""},s=document.body.getBoundingClientRect();this.videoInfo=[{body:`${Math.floor(s.width)} * ${Math.floor(s.height)}`},{view:`${Math.floor(o.width)} * ${Math.floor(o.height)}`},{video:`${Math.floor(i.width)} * ${Math.floor(i.height)}`},{canvas:`${Math.floor(r.width)} * ${Math.floor(r.height)}`}]}))},resetGallary(){this.model.gallery=[]},addGallary({code:e,imageURL:t,result:o,checker:a}){this.model.gallery.push({code:e,imageURL:t,result:o,checker:a})},doAnimationEnd(){this.anime=!1},doRsult(e){let t=e.currentTarget;var o=t.dataset.resultIndex,a=this.model.gallery[o].result;this.model.dspResult=JSON.stringify(a)},doStop(){this.term()},doStart(){this.init()},doProcessed(e){if(e){this.console("[Processed]",e);const t=this.Quagga.canvas.ctx.overlay,o=this.Quagga.canvas.dom.overlay;e.boxes&&(t.clearRect(0,0,parseInt(o.getAttribute("width")),parseInt(o.getAttribute("height"))),e.boxes.filter((t=>t!==e.box)).forEach((e=>{this.Quagga.ImageDebug.drawPath(e,{x:0,y:1},t,{color:"green",lineWidth:2})}))),e.box&&this.Quagga.ImageDebug.drawPath(e.box,{x:0,y:1},t,{color:"#00F",lineWidth:2}),e.codeResult&&e.codeResult.code&&this.Quagga.ImageDebug.drawPath(e.line,{x:"x",y:"y"},t,{color:"red",lineWidth:3})}},doDetected(e){if(e&&e.codeResult&&(console.log("[Detected]",e),this.isSameCode(e))){const t=e.codeResult.code,o=this.Quagga.canvas.dom.image;this.model.imageURL=o.toDataURL(),this.addGallary({code:t,imageURL:this.model.imageURL,result:e,checker:this.getCodeChecker()}),this.doStop(),this.resetCodeChecker(),this.anime=!0}}}},P=E,L=o(89);const M=(0,L.Z)(P,[["render",j]]);var Q=M;const I=["id"],z={class:"modal-dialog modal-dialog-scrollable"},H={class:"modal-header"},U={class:"modal-title"},A=(0,i._)("button",{class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1);function W(e,t,o,a,n,s){return(0,i.wg)(),(0,i.iD)("div",{id:o.id,class:"modal","aria-hidden":"true"},[(0,i._)("div",z,[(0,i._)("div",{class:(0,r.C_)(["modal-content",s.compTheme])},[(0,i._)("div",H,[(0,i._)("h5",U,(0,r.zw)(o.title),1),A]),(0,i._)("div",{class:(0,r.C_)(["modal-body",s.compTheme])},[(0,i.WI)(e.$slots,"default")],2)],2)])],8,I)}var $={name:"o-modal-dialog",props:{id:{type:String,default:()=>"modal-dialog"},title:{type:String,default:()=>"Modal Dialog"},theme:{type:String,default:()=>"light"}},computed:{compTheme(){return"light"===this.theme?["bg-light","text-dark"].join(" "):["bg-dark","text-light"].join(" ")}}};const B=(0,L.Z)($,[["render",W]]);var G=B;const Z={class:"container-fluid"},Y=(0,i.uE)('<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarHead" aria-controls="navbarHead" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><a class="navbar-brand" href="#"><h5>Barcode Reader Demo</h5></a><div class="collapse navbar-collapse" id="navbarHead"><ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item"><a class="nav-link active" href="/">Home</a></li></ul><a class="btn btn-dark" href="https://github.com/rksan/barcode-detection-api-demo" target="_blank"><i class="bi bi-github"></i> github </a></div>',3),F={class:"dropdown"},N=(0,i._)("button",{class:"btn btn-dark dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,i._)("i",{class:"bi bi-gear-fill"})],-1),K={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdownMenuButton1"};function q(e,t,o,a,n,s){const l=G;return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("nav",{class:(0,r.C_)(["navbar navbar-expand-lg",s.compTheme])},[(0,i._)("div",Z,[Y,(0,i._)("div",F,[N,(0,i._)("ul",K,[(0,i._)("li",null,[(0,i._)("button",{class:"dropdown-item","data-bs-toggle":"modal","data-bs-target":"#supported-constraints-dialog",onClick:t[0]||(t[0]=(...e)=>s.onSC&&s.onSC(...e))}," Supported Constraints ")]),(0,i._)("li",null,[(0,i._)("button",{class:"dropdown-item","data-bs-toggle":"modal","data-bs-target":"#enumerate-devices-dialog",onClick:t[1]||(t[1]=(...e)=>s.onEnumerateDevices&&s.onEnumerateDevices(...e))}," Enumerate Devices ")])])])])],2),(0,i.Wm)(l,{id:"supported-constraints-dialog",theme:o.theme,title:"Supported Constraints"},{default:(0,i.w5)((()=>[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.supportedConstraints,((e,t,o)=>((0,i.wg)(),(0,i.iD)("li",{key:o},(0,r.zw)(t)+" : "+(0,r.zw)(e),1)))),128))])])),_:1},8,["theme"]),(0,i.Wm)(l,{id:"enumerate-devices-dialog",theme:o.theme,title:"Enumerate Devices"},{default:(0,i.w5)((()=>[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.devices,((e,t,o)=>((0,i.wg)(),(0,i.iD)("li",{key:o},(0,r.zw)(t)+" : "+(0,r.zw)(e),1)))),128))])])),_:1},8,["theme"])],64)}var J={name:"o-navbar",components:{OModalDialog:G},props:{theme:{type:String,default(){return"light"}}},computed:{compTheme(){return"light"===this.theme?["navbar-light","bg-light","text-dark"].join(" "):["navbar-dark","bg-dark","text-light"].join(" ")}},data(){return{supportedConstraints:[],devices:[]}},methods:{onSC(){let e=navigator.mediaDevices.getSupportedConstraints();this.supportedConstraints=e},onEnumerateDevices(){navigator.mediaDevices.enumerateDevices().then((e=>{this.devices=e}))}}};const V=(0,L.Z)(J,[["render",q]]);var X=V;const ee={class:"header grid-item-head"},te={class:"main grid-item-main"};function oe(e,t,o,a,n,s){const l=X,d=Q;return(0,i.wg)(),(0,i.iD)("div",{class:(0,r.C_)(["container-fluid grid-container",s.compTheme])},[(0,i._)("header",ee,[(0,i.Wm)(l,{theme:o.theme},null,8,["theme"])]),(0,i._)("main",te,[(0,i.Wm)(d,{theme:o.theme},null,8,["theme"])])],2)}var ae={name:"p-home",components:{ONavbar:X,OInputForm:Q},props:{theme:{type:String,default(){return"light"}}},computed:{compTheme(){return"light"===this.theme?["bg-light","text-dark"].join(" "):["bg-dark","text-light"].join(" ")}}};const ie=(0,L.Z)(ae,[["render",oe],["__scopeId","data-v-2b1e026e"]]);var ne=ie,re={name:"App",components:{PHome:ne}};const se=(0,L.Z)(re,[["render",n]]);var le=se,de=o(4193);(0,a.ri)(le).use(de.ZP).mount("#app")}},t={};function o(a){var i=t[a];if(void 0!==i)return i.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,o),n.exports}o.m=e,function(){var e=[];o.O=function(t,a,i,n){if(!a){var r=1/0;for(c=0;c<e.length;c++){a=e[c][0],i=e[c][1],n=e[c][2];for(var s=!0,l=0;l<a.length;l++)(!1&n||r>=n)&&Object.keys(o.O).every((function(e){return o.O[e](a[l])}))?a.splice(l--,1):(s=!1,n<r&&(r=n));if(s){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[a,i,n]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,n,r=a[0],s=a[1],l=a[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(i in s)o.o(s,i)&&(o.m[i]=s[i]);if(l)var c=l(o)}for(t&&t(a);d<r.length;d++)n=r[d],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(c)},a=self["webpackChunkbarcode_detection_api_demo"]=self["webpackChunkbarcode_detection_api_demo"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[998],(function(){return o(2896)}));a=o.O(a)})();
//# sourceMappingURL=app.dd8091ad.js.map