(function(){"use strict";var e={3192:function(e,t,r){var o=r(9242),a=r(3396),s=r(7139);const i={class:"wapper container-fluid bg-dark d-flex align-items-start flex-column"},n={class:"header order-first"},c=(0,a._)("p",null,"Start をクリック後、ブラウザにカメラの使用を許可してください。",-1),d=(0,a._)("i",{class:"bi bi-upc-scan"},null,-1),l=(0,a._)("i",{class:"bi bi-stop-circle-fill"},null,-1),u=(0,a._)("div",{class:"content camera-demo text-center"},[(0,a._)("div",{id:"interactive",class:"viewport"})],-1),h={class:"footer order-last"},g={class:"gallery row"},f=["src"],m={class:"card-body card-img-overlay text-center"},p={class:"card-title bg-light text-center opacity-50"},v={id:"dspResult",class:"modal","aria-hidden":"true"},b={class:"modal-dialog modal-dialog-scrollable"},y={class:"modal-content"},k=(0,a._)("div",{class:"modal-header"},[(0,a._)("h5",{class:"modal-title"},"Result"),(0,a._)("button",{class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),C={class:"modal-body bg-dark"},_={class:"prettyprint linenums"};function w(e,t,r,o,w,x){const R=(0,a.up)("b-button");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",i,[(0,a._)("header",n,[c,(0,a.Wm)(R,{onClick:e.doStart,variant:"primary"},{default:(0,a.w5)((()=>[d,(0,a.Uk)(" Start ")])),_:1},8,["onClick"]),(0,a.Wm)(R,{onClick:e.doStop,variant:"danger"},{default:(0,a.w5)((()=>[l,(0,a.Uk)(" Stop ")])),_:1},8,["onClick"])]),u,(0,a._)("footer",h,[(0,a._)("div",g,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.model.gallery,((t,r)=>((0,a.wg)(),(0,a.iD)("div",{key:r,class:"card bg-dark col align-middle"},[(0,a._)("img",{src:t.imageURL,class:"card-img"},null,8,f),(0,a._)("div",m,[(0,a._)("h5",p,(0,s.zw)(t.code),1),(0,a.Wm)(R,{href:"#dspResult","data-bs-toggle":"modal","data-bs-target":"#dspResult","data-result-index":r,onClick:e.doRsult},{default:(0,a.w5)((()=>[(0,a.Uk)("Result ")])),_:2},1032,["data-result-index","onClick"])])])))),128))])])]),(0,a._)("div",v,[(0,a._)("div",b,[(0,a._)("div",y,[k,(0,a._)("div",C,[(0,a._)("code",_,(0,s.zw)(e.model.dspResult),1)])])])])],64)}r(7658);var x={inputStream:{name:"Live",type:"LiveStream",target:"#interactive.viewport",constraints:{width:1280,height:720,facingMode:"environment"},singleChannel:!1},numOfWorkers:navigator.hardwareConcurrency||4,decoder:{readers:["ean_reader"]},locate:!0},R={name:"p-input-form",data(){return{model:{gallery:[{code:"",imageURL:"",result:null,checker:null}],dspResult:""}}},setup(){const e={log:"#my-log",Quagga:null,codeChecker:{codes:[],count:0,error:0,errors:[]}};return{...e,console(e,t){if("string"===typeof this.log&&(this.log=document.querySelector(this.log)),"string"===typeof t){var r=document.createElement("p");r.textContent=t,this.log.appendChild(r)}},init(){this.codes=[],this.Quagga=r(928),this.Quagga.onProcessed(this.doProcessed),this.Quagga.onDetected(this.doDetected),this.Quagga.init(x,(e=>{e?this.console(e):(this.console("Initialization finished. Ready to start"),this.Quagga.start())}))},term(){this.Quagga.offProcessed(this.doProcessed),this.Quagga.offDetected(this.doDetected),this.Quagga.stop()},isSameCode(e){const t=this.codeCheckCode(e.codeResult.code);if(t.length<5)return!1;const r=t.every((e=>e===t[0]));return this.codeCheckCount(),r||this.codeCheckError(),r},getCodeChecker(){return Object.assign({},this.codeChecker)},codeCheckCode(e){return e&&this.codeChecker.codes.push(e),this.codeChecker.codes},codeCheckCount(){return++this.codeChecker.count},codeCheckError(){return this.codeChecker.errors.push(this.codeChecker.codes.shift()),++this.codeChecker.error},resetCodeChecker(){this.codeChecker.codes=[],this.codeChecker.count=0,this.codeChecker.error=0,this.codeChecker.errors=[]}}},created(){this.resetGallary()},methods:{resetGallary(){this.model.gallery=[]},addGallary({code:e,imageURL:t,result:r,checker:o}){this.model.gallery.push({code:e,imageURL:t,result:r,checker:o})},doRsult(e){let t=e.currentTarget;var r=t.dataset.resultIndex,o=this.model.gallery[r].result;this.model.dspResult=JSON.stringify(o)},doStop(){this.term()},doStart(){this.init()},doProcessed(e){if(e){this.console("[Processed]",e);const t=this.Quagga.canvas.ctx.overlay,r=this.Quagga.canvas.dom.overlay;e.boxes&&(t.clearRect(0,0,parseInt(r.getAttribute("width")),parseInt(r.getAttribute("height"))),e.boxes.filter((t=>t!==e.box)).forEach((e=>{this.Quagga.ImageDebug.drawPath(e,{x:0,y:1},t,{color:"green",lineWidth:2})}))),e.box&&this.Quagga.ImageDebug.drawPath(e.box,{x:0,y:1},t,{color:"#00F",lineWidth:2}),e.codeResult&&e.codeResult.code&&this.Quagga.ImageDebug.drawPath(e.line,{x:"x",y:"y"},t,{color:"red",lineWidth:3})}},doDetected(e){if(e&&e.codeResult&&(console.log("[Detected]",e),this.isSameCode(e))){const t=e.codeResult.code,r=this.Quagga.canvas.dom.image;this.addGallary({code:t,imageURL:r.toDataURL(),result:e,checker:this.getCodeChecker()}),this.resetCodeChecker()}}}},S=R,O=r(89);const P=(0,O.Z)(S,[["render",w]]);var Q=P;function D(e,t,r,o,s,i){const n=Q;return(0,a.wg)(),(0,a.j4)(n)}var j={name:"App",components:{PInputForm:Q}};const U=(0,O.Z)(j,[["render",D]]);var I=U,L=r(4193);(0,o.ri)(I).use(L.ZP).mount("#app")}},t={};function r(o){var a=t[o];if(void 0!==a)return a.exports;var s=t[o]={exports:{}};return e[o].call(s.exports,s,s.exports,r),s.exports}r.m=e,function(){var e=[];r.O=function(t,o,a,s){if(!o){var i=1/0;for(l=0;l<e.length;l++){o=e[l][0],a=e[l][1],s=e[l][2];for(var n=!0,c=0;c<o.length;c++)(!1&s||i>=s)&&Object.keys(r.O).every((function(e){return r.O[e](o[c])}))?o.splice(c--,1):(n=!1,s<i&&(i=s));if(n){e.splice(l--,1);var d=a();void 0!==d&&(t=d)}}return t}s=s||0;for(var l=e.length;l>0&&e[l-1][2]>s;l--)e[l]=e[l-1];e[l]=[o,a,s]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,s,i=o[0],n=o[1],c=o[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(a in n)r.o(n,a)&&(r.m[a]=n[a]);if(c)var l=c(r)}for(t&&t(o);d<i.length;d++)s=i[d],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(l)},o=self["webpackChunkbarcode_detection_api_demo"]=self["webpackChunkbarcode_detection_api_demo"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=r.O(void 0,[998],(function(){return r(3192)}));o=r.O(o)})();
//# sourceMappingURL=app.6ce40827.js.map