(function(){"use strict";var e={7263:function(e,t,a){var o=a(9242),n=a(3396);function i(e,t,a,o,i,r){const s=(0,n.up)("PHome");return(0,n.wg)(),(0,n.j4)(s,{theme:"dark"})}var r=a(7139);const s={class:"wapper grid-container"},l={class:"header grid-item-head"},d=(0,n._)("p",null,"Start をクリック後、ブラウザにカメラの使用を許可してください。",-1),c=(0,n._)("i",{class:"bi bi-upc-scan"},null,-1),u=(0,n._)("i",{class:"bi bi-stop-circle-fill"},null,-1),g=(0,n._)("div",{id:"interactive",class:"viewport"},null,-1),h=[g],m={class:"footer w-100 position-absolute bottom-0 start-0"},p={class:"d-flex justify-content-end p-5"},b=(0,n._)("button",{type:"button",class:"preview-button btn btn-secondary","data-bs-toggle":"offcanvas","data-bs-target":"#previewList","aria-controls":"previewList"},[(0,n._)("i",{class:"bi bi-images"})],-1),v=(0,n._)("button",{type:"button",class:"btn dropdown-toggle dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,n._)("span",{class:"visually-hidden"},"Toggle Dropdown")],-1),f={class:"dropdown-menu dropdown-menu-dark"},_=(0,n._)("li",null,[(0,n._)("button",{class:"dropdown-item","data-bs-toggle":"offcanvas","data-bs-target":"#previewList","aria-controls":"previewList"}," Show Preview ")],-1),w=(0,n._)("div",{class:"offcanvas-header"},[(0,n._)("h5",{class:"offcanvas-title",id:"offcanvasExampleLabel"},"Previews"),(0,n._)("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),C={class:"offcanvas-body"},y={class:"preview-list list-group list-group-flush list-group-numbered",style:{"flex-direction":"column-reverse"}},k=["src"],x={class:"preview-list-text bg-light text-dark"},S={id:"dspResult",class:"modal","aria-hidden":"true"},D={class:"modal-dialog modal-dialog-scrollable"},R=(0,n._)("div",{class:"modal-header"},[(0,n._)("h5",{class:"modal-title"},"Result"),(0,n._)("button",{class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),j={class:"modal-body bg-dark"},T={class:"prettyprint linenums"};function O(e,t,a,i,g,O){const P=(0,n.up)("b-button");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",s,[(0,n._)("section",l,[d,(0,n._)("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=(...t)=>e.doStart&&e.doStart(...t))},[c,(0,n.Uk)(" Start ")]),(0,n._)("button",{class:"btn btn-danger",onClick:t[1]||(t[1]=(...t)=>e.doStop&&e.doStop(...t))},[u,(0,n.Uk)(" Stop ")])]),(0,n._)("section",{class:(0,r.C_)(["content grid-item-main",e.compCameraTheme])},h,2)]),(0,n._)("div",m,[(0,n._)("div",p,[(0,n._)("div",{class:(0,r.C_)(["btn-group bg-secondary dropup",e.compAnime]),onAnimationend:t[3]||(t[3]=(...t)=>e.doAnimationEnd&&e.doAnimationEnd(...t))},[b,v,(0,n._)("ul",f,[_,(0,n._)("li",null,[(0,n._)("button",{class:"dropdown-item",onClick:t[2]||(t[2]=(...t)=>e.resetGallary&&e.resetGallary(...t))},"Reset")])]),(0,n.wy)((0,n._)("span",{class:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"},(0,r.zw)(e.model.gallery.length),513),[[o.F8,0!==e.model.gallery.length]])],34)])]),(0,n._)("div",{class:(0,r.C_)(["offcanvas offcanvas-end",e.compTheme]),tabindex:"-1",id:"previewList"},[w,(0,n._)("div",C,[(0,n._)("div",y,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.model.gallery,((t,a)=>((0,n.wg)(),(0,n.j4)(P,{key:a,class:(0,r.C_)(["list-group-item list-group-item-action",e.compTheme]),"data-bs-toggle":"modal","data-bs-target":"#dspResult","data-result-index":a,onClick:e.doRsult},{default:(0,n.w5)((()=>[(0,n._)("img",{src:t.imageURL,class:"preview-list-img"},null,8,k),(0,n._)("h5",x," Code "+(0,r.zw)(a+1)+". : "+(0,r.zw)(t.code),1)])),_:2},1032,["class","data-result-index","onClick"])))),128))])])],2),(0,n._)("div",S,[(0,n._)("div",D,[(0,n._)("div",{class:(0,r.C_)(["modal-content",e.compTheme])},[R,(0,n._)("div",j,[(0,n._)("code",T,(0,r.zw)(e.model.dspResult),1)])],2)])])],64)}a(7658);var P={inputStream:{name:"Live",type:"LiveStream",target:"#interactive.viewport",constraints:{width:{min:1280,ideal:1920,max:2560},height:{min:720,ideal:1080,max:1440},facingMode:"environment"},singleChannel:!1},numOfWorkers:navigator.hardwareConcurrency||4,decoder:{readers:["ean_reader"]},locate:!0},L={name:"o-input-form",props:{theme:{type:String,default(){return"light"}}},computed:{compTheme(){return"light"===this.theme?["bg-light","text-dark"].join(" "):["bg-dark","text-light"].join(" ")},compCameraTheme(){return"light"===this.theme?["camera-demo-light"].join(" "):["camera-demo-dark"].join(" ")},compAnime(){return this.anime?["anime"].join(" "):""}},data(){return{model:{imageURL:"",gallery:[{code:"",imageURL:"",result:null,checker:null}],dspResult:""},anime:!1}},setup(){const e={log:"#my-log",Quagga:null,codeChecker:{codes:[],count:0,error:0,errors:[]}};return{...e,console(e,t){if("string"===typeof this.log&&(this.log=document.querySelector(this.log)),"string"===typeof t){var a=document.createElement("p");a.textContent=t,this.log.appendChild(a)}},init(){this.codes=[],this.Quagga=a(928),this.Quagga.onProcessed(this.doProcessed),this.Quagga.onDetected(this.doDetected),this.Quagga.init(P,(e=>{e?this.console(e):(this.console("Initialization finished. Ready to start"),this.Quagga.start())}))},term(){this.Quagga.offProcessed(this.doProcessed),this.Quagga.offDetected(this.doDetected),this.Quagga.stop()},isSameCode(e){const t=this.codeCheckCode(e.codeResult.code);if(t.length<5)return!1;const a=t.every((e=>e===t[0]));return this.codeCheckCount(),a||this.codeCheckError(),a},getCodeChecker(){return Object.assign({},this.codeChecker)},codeCheckCode(e){return e&&this.codeChecker.codes.push(e),this.codeChecker.codes},codeCheckCount(){return++this.codeChecker.count},codeCheckError(){return this.codeChecker.errors.push(this.codeChecker.codes.shift()),++this.codeChecker.error},resetCodeChecker(){this.codeChecker.codes=[],this.codeChecker.count=0,this.codeChecker.error=0,this.codeChecker.errors=[]}}},created(){this.resetGallary()},methods:{resetGallary(){this.model.gallery=[]},addGallary({code:e,imageURL:t,result:a,checker:o}){this.model.gallery.push({code:e,imageURL:t,result:a,checker:o})},doAnimationEnd(){this.anime=!1},doRsult(e){let t=e.currentTarget;var a=t.dataset.resultIndex,o=this.model.gallery[a].result;this.model.dspResult=JSON.stringify(o)},doStop(){this.term()},doStart(){this.init()},doProcessed(e){if(e){this.console("[Processed]",e);const t=this.Quagga.canvas.ctx.overlay,a=this.Quagga.canvas.dom.overlay;e.boxes&&(t.clearRect(0,0,parseInt(a.getAttribute("width")),parseInt(a.getAttribute("height"))),e.boxes.filter((t=>t!==e.box)).forEach((e=>{this.Quagga.ImageDebug.drawPath(e,{x:0,y:1},t,{color:"green",lineWidth:2})}))),e.box&&this.Quagga.ImageDebug.drawPath(e.box,{x:0,y:1},t,{color:"#00F",lineWidth:2}),e.codeResult&&e.codeResult.code&&this.Quagga.ImageDebug.drawPath(e.line,{x:"x",y:"y"},t,{color:"red",lineWidth:3})}},doDetected(e){if(e&&e.codeResult&&(console.log("[Detected]",e),this.isSameCode(e))){const t=e.codeResult.code,a=this.Quagga.canvas.dom.image;this.model.imageURL=a.toDataURL(),this.addGallary({code:t,imageURL:this.model.imageURL,result:e,checker:this.getCodeChecker()}),this.doStop(),this.resetCodeChecker(),this.anime=!0}}}},E=L,Q=a(89);const H=(0,Q.Z)(E,[["render",O]]);var U=H;const z=["id"],I={class:"modal-dialog modal-dialog-scrollable"},A={class:"modal-header"},W={class:"modal-title"},M=(0,n._)("button",{class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1);function G(e,t,a,o,i,s){return(0,n.wg)(),(0,n.iD)("div",{id:a.id,class:"modal","aria-hidden":"true"},[(0,n._)("div",I,[(0,n._)("div",{class:(0,r.C_)(["modal-content",s.compTheme])},[(0,n._)("div",A,[(0,n._)("h5",W,(0,r.zw)(a.title),1),M]),(0,n._)("div",{class:(0,r.C_)(["modal-body",s.compTheme])},[(0,n.WI)(e.$slots,"default")],2)],2)])],8,z)}var Z={name:"o-modal-dialog",props:{id:{type:String,default:()=>"modal-dialog"},title:{type:String,default:()=>"Modal Dialog"},theme:{type:String,default:()=>"light"}},computed:{compTheme(){return"light"===this.theme?["bg-light","text-dark"].join(" "):["bg-dark","text-light"].join(" ")}}};const Y=(0,Q.Z)(Z,[["render",G]]);var F=Y;const B={class:"container-fluid"},K=(0,n.uE)('<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarHead" aria-controls="navbarHead" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><a class="navbar-brand" href="#"><h5>Barcode Reader Demo</h5></a><div class="collapse navbar-collapse" id="navbarHead"><ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item"><a class="nav-link active" href="/">Home</a></li></ul><button class="btn btn-dark" href="https://github.com/rksan/barcode-detection-api-demo" target="_blank"><i class="bi bi-github"></i> github </button></div>',3),N={class:"dropdown"},q=(0,n._)("button",{class:"btn btn-dark dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,n._)("i",{class:"bi bi-gear-fill"})],-1),J={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdownMenuButton1"};function $(e,t,a,o,i,s){const l=F;return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("nav",{class:(0,r.C_)(["navbar navbar-expand-lg",s.compTheme])},[(0,n._)("div",B,[K,(0,n._)("div",N,[q,(0,n._)("ul",J,[(0,n._)("li",null,[(0,n._)("button",{class:"dropdown-item","data-bs-toggle":"modal","data-bs-target":"#supported-constraints-dialog",onClick:t[0]||(t[0]=(...e)=>s.onSC&&s.onSC(...e))}," Supported Constraints ")]),(0,n._)("li",null,[(0,n._)("button",{class:"dropdown-item","data-bs-toggle":"modal","data-bs-target":"#enumerate-devices-dialog",onClick:t[1]||(t[1]=(...e)=>s.onEnumerateDevices&&s.onEnumerateDevices(...e))}," Enumerate Devices ")])])])])],2),(0,n.Wm)(l,{id:"supported-constraints-dialog",theme:a.theme,title:"Supported Constraints"},{default:(0,n.w5)((()=>[(0,n._)("ul",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.supportedConstraints,((e,t,a)=>((0,n.wg)(),(0,n.iD)("li",{key:a},(0,r.zw)(t)+" : "+(0,r.zw)(e),1)))),128))])])),_:1},8,["theme"]),(0,n.Wm)(l,{id:"enumerate-devices-dialog",theme:a.theme,title:"Enumerate Devices"},{default:(0,n.w5)((()=>[(0,n._)("ul",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.devices,((e,t,a)=>((0,n.wg)(),(0,n.iD)("li",{key:a},(0,r.zw)(t)+" : "+(0,r.zw)(e),1)))),128))])])),_:1},8,["theme"])],64)}var V={name:"o-navbar",components:{OModalDialog:F},props:{theme:{type:String,default(){return"light"}}},computed:{compTheme(){return"light"===this.theme?["navbar-light","bg-light","text-dark"].join(" "):["navbar-dark","bg-dark","text-light"].join(" ")}},data(){return{supportedConstraints:[],devices:[]}},methods:{onSC(){let e=navigator.mediaDevices.getSupportedConstraints();this.supportedConstraints=e},onEnumerateDevices(){navigator.mediaDevices.enumerateDevices().then((e=>{this.devices=e}))}}};const X=(0,Q.Z)(V,[["render",$]]);var ee=X;const te={class:"header grid-item-head"},ae={class:"main grid-item-main"};function oe(e,t,a,o,i,s){const l=ee,d=U;return(0,n.wg)(),(0,n.iD)("div",{class:(0,r.C_)(["container-fluid grid-container",s.compTheme])},[(0,n._)("header",te,[(0,n.Wm)(l,{theme:a.theme},null,8,["theme"])]),(0,n._)("main",ae,[(0,n.Wm)(d,{theme:a.theme},null,8,["theme"])])],2)}var ne={name:"p-home",components:{ONavbar:ee,OInputForm:U},props:{theme:{type:String,default(){return"light"}}},computed:{compTheme(){return"light"===this.theme?["bg-light","text-dark"].join(" "):["bg-dark","text-light"].join(" ")}}};const ie=(0,Q.Z)(ne,[["render",oe],["__scopeId","data-v-2b1e026e"]]);var re=ie,se={name:"App",components:{PHome:re}};const le=(0,Q.Z)(se,[["render",i]]);var de=le,ce=a(4193);(0,o.ri)(de).use(ce.ZP).mount("#app")}},t={};function a(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,o,n,i){if(!o){var r=1/0;for(c=0;c<e.length;c++){o=e[c][0],n=e[c][1],i=e[c][2];for(var s=!0,l=0;l<o.length;l++)(!1&i||r>=i)&&Object.keys(a.O).every((function(e){return a.O[e](o[l])}))?o.splice(l--,1):(s=!1,i<r&&(r=i));if(s){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[o,n,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,i,r=o[0],s=o[1],l=o[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(n in s)a.o(s,n)&&(a.m[n]=s[n]);if(l)var c=l(a)}for(t&&t(o);d<r.length;d++)i=r[d],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(c)},o=self["webpackChunkbarcode_detection_api_demo"]=self["webpackChunkbarcode_detection_api_demo"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[998],(function(){return a(7263)}));o=a.O(o)})();
//# sourceMappingURL=app.5ad83860.js.map